<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1020 520">
  <defs>
    <linearGradient id="bg" x1="0" x2="0" y1="0" y2="1">
      <stop offset="0%" stop-color="#f8fbff"/>
      <stop offset="100%" stop-color="#eef4ff"/>
    </linearGradient>
    <marker id="arr" markerWidth="8" markerHeight="8" refX="6" refY="3" orient="auto">
      <path d="M0,0 L0,6 L8,3 z" fill="#64748b"/>
    </marker>
  </defs>
  <style>
    .t { font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; }
    .title { font-size: 14px; font-weight: 700; fill: #0f172a; }
    .sub { font-size: 10.5px; fill: #475569; }
    .label { font-size: 10px; font-weight: 700; fill: #94a3b8; letter-spacing: 0.08em; }
    .box { fill: #fff; stroke: #cbd5e1; stroke-width: 1.2; }
    .grp { fill: #0b63ce; }
    .grp-g { fill: #16a34a; }
    .grp-r { fill: #dc2626; }
    .grp-a { fill: #d97706; }
    .grp-p { fill: #7c3aed; }
    .grp-f { fill: #0891b2; }
    .line { stroke: #94a3b8; stroke-width: 1.2; fill: none; marker-end: url(#arr); }
    .dline { stroke: #94a3b8; stroke-width: 1; fill: none; stroke-dasharray: 4 3; }
  </style>

  <rect width="1020" height="520" rx="14" fill="url(#bg)"/>

  <!-- Title -->
  <text x="510" y="32" text-anchor="middle" class="t title">opticon -- system architecture</text>
  <text x="510" y="50" text-anchor="middle" class="t sub">financial terminal + personal finance + live map + simulator + prediction markets</text>

  <!-- ===== COL 1: DATA SOURCES ===== -->
  <text x="100" y="76" text-anchor="middle" class="t label">DATA SOURCES</text>

  <!-- FMP (Primary) -->
  <rect x="20" y="84" width="160" height="48" rx="7" class="box"/>
  <rect x="20" y="84" width="6" height="48" rx="3" class="grp"/>
  <text x="100" y="104" text-anchor="middle" class="t title" style="font-size:12px;">FMP (Primary)</text>
  <text x="100" y="120" text-anchor="middle" class="t sub">100 assets batch quote</text>
  <text x="100" y="134" text-anchor="middle" class="t sub">commodities + indices</text>

  <!-- Yahoo Finance (Fallback) -->
  <rect x="20" y="140" width="160" height="36" rx="7" class="box"/>
  <rect x="20" y="140" width="6" height="36" rx="3" class="grp"/>
  <text x="100" y="158" text-anchor="middle" class="t title" style="font-size:12px;">Yahoo Finance</text>
  <text x="100" y="172" text-anchor="middle" class="t sub">fallback + chart API</text>

  <!-- Polymarket -->
  <rect x="20" y="186" width="160" height="36" rx="7" class="box"/>
  <rect x="20" y="186" width="6" height="36" rx="3" class="grp-p"/>
  <text x="100" y="206" text-anchor="middle" class="t title" style="font-size:12px;">Polymarket</text>
  <text x="100" y="220" text-anchor="middle" class="t sub">prediction markets</text>

  <!-- GDELT -->
  <rect x="20" y="232" width="160" height="36" rx="7" class="box"/>
  <rect x="20" y="232" width="6" height="36" rx="3" class="grp-r"/>
  <text x="100" y="252" text-anchor="middle" class="t title" style="font-size:12px;">GDELT / News</text>
  <text x="100" y="266" text-anchor="middle" class="t sub">global events feed</text>

  <!-- USGS -->
  <rect x="20" y="278" width="160" height="36" rx="7" class="box"/>
  <rect x="20" y="278" width="6" height="36" rx="3" class="grp-r"/>
  <text x="100" y="298" text-anchor="middle" class="t title" style="font-size:12px;">USGS Earthquakes</text>
  <text x="100" y="312" text-anchor="middle" class="t sub">live seismic feed</text>

  <!-- OSM / Traffic -->
  <rect x="20" y="324" width="160" height="36" rx="7" class="box"/>
  <rect x="20" y="324" width="6" height="36" rx="3" class="grp-a"/>
  <text x="100" y="344" text-anchor="middle" class="t title" style="font-size:12px;">OSM / Traffic</text>
  <text x="100" y="358" text-anchor="middle" class="t sub">incidents + construction</text>

  <!-- Geo -->
  <rect x="20" y="370" width="160" height="36" rx="7" class="box"/>
  <rect x="20" y="370" width="6" height="36" rx="3" class="grp-g"/>
  <text x="100" y="390" text-anchor="middle" class="t title" style="font-size:12px;">Geolocation</text>
  <text x="100" y="404" text-anchor="middle" class="t sub">browser GPS + fallback</text>

  <!-- arrows from col1 to col2 -->
  <line x1="180" y1="108" x2="310" y2="120" class="line"/>
  <line x1="180" y1="158" x2="310" y2="135" class="line"/>
  <line x1="180" y1="204" x2="310" y2="145" class="line"/>
  <line x1="180" y1="250" x2="310" y2="155" class="line"/>
  <line x1="180" y1="296" x2="310" y2="165" class="line"/>
  <line x1="180" y1="342" x2="310" y2="170" class="line"/>
  <line x1="180" y1="388" x2="490" y2="370" class="line"/>

  <!-- ===== COL 2: GATEWAY + ENGINE ===== -->
  <text x="430" y="76" text-anchor="middle" class="t label">VERCEL SERVERLESS</text>

  <!-- Gateway -->
  <rect x="310" y="84" width="240" height="100" rx="7" fill="#0b63ce"/>
  <text x="430" y="106" text-anchor="middle" class="t" style="font-size:13px;fill:#fff;font-weight:700;">api/gateway.js</text>
  <text x="430" y="124" text-anchor="middle" class="t" style="font-size:10.5px;fill:#bfdbfe;">single Vercel function</text>
  <text x="430" y="140" text-anchor="middle" class="t" style="font-size:10.5px;fill:#bfdbfe;">routes: stocks + markets + auth + portfolio</text>
  <text x="430" y="156" text-anchor="middle" class="t" style="font-size:10.5px;fill:#bfdbfe;">earthquakes + events + traffic + +14 more</text>
  <text x="430" y="172" text-anchor="middle" class="t" style="font-size:10.5px;fill:#bfdbfe;">FMP primary / Yahoo fallback</text>

  <!-- KV Store -->
  <rect x="310" y="196" width="115" height="56" rx="7" class="box"/>
  <text x="368" y="218" text-anchor="middle" class="t title" style="font-size:11px;">Vercel KV</text>
  <text x="368" y="234" text-anchor="middle" class="t sub">auth + sessions</text>
  <text x="368" y="248" text-anchor="middle" class="t sub">portfolio data</text>

  <!-- Simulator Core -->
  <rect x="435" y="196" width="115" height="56" rx="7" fill="#16a34a"/>
  <text x="493" y="218" text-anchor="middle" class="t" style="font-size:11px;fill:#fff;font-weight:700;">Simulator</text>
  <text x="493" y="234" text-anchor="middle" class="t" style="font-size:10px;fill:#bbf7d0;">Monte Carlo 5K</text>
  <text x="493" y="248" text-anchor="middle" class="t" style="font-size:10px;fill:#bbf7d0;">$1 to $1T</text>

  <!-- Finance Panel -->
  <rect x="310" y="264" width="240" height="56" rx="7" fill="#0891b2"/>
  <text x="430" y="286" text-anchor="middle" class="t" style="font-size:11px;fill:#fff;font-weight:700;">Finance Panel</text>
  <text x="430" y="302" text-anchor="middle" class="t" style="font-size:10px;fill:#cffafe;">portfolio + budget + debt + goals + spending</text>
  <text x="430" y="316" text-anchor="middle" class="t" style="font-size:10px;fill:#cffafe;">KV persistence + localStorage fallback</text>

  <!-- gateway to kv/sim -->
  <line x1="368" y1="184" x2="368" y2="196" class="line"/>
  <line x1="493" y1="184" x2="493" y2="196" class="line"/>

  <!-- ===== COL 3: UI LAYER ===== -->
  <text x="820" y="76" text-anchor="middle" class="t label">REACT UI (Vite)</text>

  <!-- MapLibre -->
  <rect x="700" y="84" width="300" height="56" rx="7" class="box"/>
  <rect x="700" y="84" width="6" height="56" rx="3" class="grp"/>
  <text x="850" y="107" text-anchor="middle" class="t title" style="font-size:12px;">MapLibre GL -- Live Map Backdrop</text>
  <text x="850" y="125" text-anchor="middle" class="t sub">CartoCDN tiles + GPS + markers</text>
  <text x="850" y="139" text-anchor="middle" class="t sub">seismic + traffic + events + user pin</text>

  <!-- Ticker -->
  <rect x="700" y="152" width="300" height="40" rx="7" class="box"/>
  <rect x="700" y="152" width="6" height="40" rx="3" class="grp-a"/>
  <text x="850" y="171" text-anchor="middle" class="t title" style="font-size:12px;">Stock Ticker</text>
  <text x="850" y="187" text-anchor="middle" class="t sub">100 assets + 30s live refresh</text>

  <!-- Situation Monitor -->
  <rect x="700" y="204" width="145" height="66" rx="7" class="box"/>
  <rect x="700" y="204" width="6" height="66" rx="3" class="grp-r"/>
  <text x="773" y="224" text-anchor="middle" class="t title" style="font-size:11px;">Situation Monitor</text>
  <text x="773" y="240" text-anchor="middle" class="t sub">incidents + traffic</text>
  <text x="773" y="254" text-anchor="middle" class="t sub">earthquakes + events</text>
  <text x="773" y="268" text-anchor="middle" class="t sub">120s refresh</text>

  <!-- Prediction Panel -->
  <rect x="855" y="204" width="145" height="66" rx="7" class="box"/>
  <rect x="855" y="204" width="6" height="66" rx="3" class="grp-p"/>
  <text x="928" y="224" text-anchor="middle" class="t title" style="font-size:11px;">Prediction Markets</text>
  <text x="928" y="240" text-anchor="middle" class="t sub">Polymarket feed</text>
  <text x="928" y="254" text-anchor="middle" class="t sub">geo-anchored pins</text>
  <text x="928" y="268" text-anchor="middle" class="t sub">live probability</text>

  <!-- Finance Panel UI -->
  <rect x="700" y="282" width="300" height="48" rx="7" class="box"/>
  <rect x="700" y="282" width="6" height="48" rx="3" class="grp-f"/>
  <text x="850" y="302" text-anchor="middle" class="t title" style="font-size:12px;">Finance Panel</text>
  <text x="850" y="318" text-anchor="middle" class="t sub">portfolio + budget + debt tracker + spending trends + JSON upload</text>

  <!-- Simulator UI -->
  <rect x="700" y="342" width="300" height="40" rx="7" class="box"/>
  <rect x="700" y="342" width="6" height="40" rx="3" class="grp-g"/>
  <text x="850" y="360" text-anchor="middle" class="t title" style="font-size:12px;">Trading Simulator UI</text>
  <text x="850" y="376" text-anchor="middle" class="t sub">50ms tick + live base prices + P&amp;L display</text>

  <!-- gateway to UI -->
  <line x1="550" y1="120" x2="700" y2="112" class="line"/>
  <line x1="550" y1="140" x2="700" y2="172" class="line"/>
  <line x1="550" y1="150" x2="700" y2="240" class="line"/>
  <line x1="550" y1="150" x2="855" y2="240" class="line"/>
  <line x1="550" y1="290" x2="700" y2="306" class="line"/>
  <line x1="550" y1="160" x2="700" y2="360" class="line"/>

  <!-- ===== BOTTOM: INFRA ===== -->
  <rect x="20" y="440" width="980" height="52" rx="8" class="box"/>
  <text x="510" y="460" text-anchor="middle" class="t label">INFRASTRUCTURE</text>
  <text x="510" y="478" text-anchor="middle" class="t sub">Vercel (single function) + Vercel KV (Upstash Redis) + GitHub Actions CI (vitest) + CartoCDN tiles + FMP API + opticon.heyitsmejosh.com</text>
</svg>
