<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 950" font-family="Helvetica Neue, Helvetica, Arial, sans-serif">
  <defs>
    <style>
      .box { fill: rgba(255, 255, 255, 0.9); stroke: rgba(0, 0, 0, 0.2); stroke-width: 2; rx: 12; }
      .box-success { fill: rgba(52, 199, 89, 0.2); stroke: rgba(52, 199, 89, 0.6); stroke-width: 2; rx: 12; }
      .box-user { fill: rgba(0, 122, 255, 0.2); stroke: rgba(0, 122, 255, 0.6); stroke-width: 2; rx: 12; }
      .box-auto { fill: rgba(255, 149, 0, 0.2); stroke: rgba(255, 149, 0, 0.6); stroke-width: 2; rx: 12; }
      .text { fill: #1d1d1f; font-size: 15px; text-anchor: middle; font-weight: 500; }
      .text-small { fill: #6e6e73; font-size: 12px; text-anchor: middle; font-weight: 400; }
      .text-user { fill: #007aff; }
      .text-auto { fill: #ff9500; }
      .arrow { stroke: #86868b; stroke-width: 2; fill: none; }
      .arrow-user { stroke: #007aff; stroke-width: 2; fill: none; }
      .arrow-auto { stroke: #ff9500; stroke-width: 2; fill: none; }
      .title { fill: #1d1d1f; font-size: 24px; font-weight: 600; text-anchor: middle; }
    </style>

    <linearGradient id="bg" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#f5f5f7;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#e8e8ed;stop-opacity:1" />
    </linearGradient>
  </defs>

  <rect width="800" height="950" fill="url(#bg)"/>
  <text x="400" y="50" class="title">Wealthsimple 2FA Automation</text>

  <!-- Legend -->
  <rect x="80" y="80" width="130" height="26" class="box" opacity="0.8"/>
  <text x="145" y="98" class="text-small" font-weight="500">Automated</text>
  <rect x="220" y="80" width="130" height="26" class="box-user" opacity="0.8"/>
  <text x="285" y="98" class="text-small text-user" font-weight="500">User Action</text>
  <rect x="360" y="80" width="130" height="26" class="box-auto" opacity="0.8"/>
  <text x="425" y="98" class="text-small text-auto" font-weight="500">2FA Logic</text>
  <rect x="500" y="80" width="130" height="26" class="box-success" opacity="0.8"/>
  <text x="565" y="98" class="text-small" font-weight="500" fill="#34c759">Success</text>

  <!-- Step 1: Script Start -->
  <rect x="250" y="140" width="300" height="60" class="box"/>
  <text x="400" y="170" class="text">üöÄ Script starts login</text>
  <text x="400" y="188" class="text-small">npm run update-portfolio</text>
  <line x1="400" y1="200" x2="400" y2="230" class="arrow"/>

  <!-- Step 2: 2FA Detected -->
  <rect x="250" y="230" width="300" height="60" class="box-auto"/>
  <text x="400" y="260" class="text text-auto">‚ö†Ô∏è  2FA page detected</text>
  <text x="400" y="278" class="text-small">No code in .env</text>
  <line x1="400" y1="290" x2="400" y2="320" class="arrow-auto"/>

  <!-- Step 3: Send iMessage -->
  <rect x="250" y="320" width="300" height="70" class="box-auto"/>
  <text x="400" y="348" class="text text-auto">üì± Send iMessage to OpenClaw</text>
  <text x="400" y="366" class="text-small">"üîê Need Wealthsimple 2FA code"</text>
  <text x="400" y="380" class="text-small">"please forward the SMS"</text>
  <line x1="400" y1="390" x2="400" y2="420" class="arrow"/>

  <!-- Step 4: Script Waits -->
  <rect x="250" y="420" width="300" height="60" class="box"/>
  <text x="400" y="450" class="text">‚è≥ Poll Messages.app DB</text>
  <text x="400" y="468" class="text-small">Every 2s for 3 minutes</text>

  <!-- User Action Branch -->
  <path d="M 550 450 L 650 450 L 650 550 L 550 550" class="arrow-user" stroke-dasharray="5,5"/>
  <rect x="570" y="500" width="200" height="70" class="box-user"/>
  <text x="670" y="528" class="text text-user">üë§ YOU forward SMS</text>
  <text x="670" y="546" class="text-small">iPhone ‚Üí OpenClaw</text>
  <text x="670" y="560" class="text-small">(~2 seconds)</text>
  <line x1="570" y1="535" x2="550" y2="535" class="arrow-user"/>

  <line x1="400" y1="480" x2="400" y2="510" class="arrow"/>

  <!-- Step 5: iMessage Syncs -->
  <rect x="250" y="510" width="300" height="60" class="box"/>
  <text x="400" y="540" class="text">‚òÅÔ∏è  iMessage syncs to Mac</text>
  <text x="400" y="558" class="text-small">Forwarded message appears</text>
  <line x1="400" y1="570" x2="400" y2="600" class="arrow"/>

  <!-- Step 6: Code Detected -->
  <rect x="250" y="600" width="300" height="70" class="box-success"/>
  <text x="400" y="630" class="text">‚úì Code found in DB</text>
  <text x="400" y="648" class="text-small">Extract 6-digit code</text>
  <text x="400" y="662" class="text-small">~/Library/Messages/chat.db</text>
  <line x1="400" y1="670" x2="400" y2="700" class="arrow"/>

  <!-- Step 7: Enter Code -->
  <rect x="250" y="700" width="300" height="60" class="box-auto"/>
  <text x="400" y="730" class="text text-auto">‚å®Ô∏è  Auto-enter code</text>
  <text x="400" y="748" class="text-small">Puppeteer types + submits</text>
  <line x1="400" y1="760" x2="400" y2="790" class="arrow"/>

  <!-- Step 8: Complete -->
  <rect x="250" y="790" width="300" height="60" class="box-success"/>
  <text x="400" y="820" class="text">‚úÖ Login complete</text>
  <text x="400" y="838" class="text-small">Scrape portfolio balances</text>

  <!-- Timing note -->
  <text x="400" y="900" class="text-small" font-weight="400">‚è±Ô∏è  Total time: ~5-10 seconds (vs 30-60s manual entry)</text>
</svg>
